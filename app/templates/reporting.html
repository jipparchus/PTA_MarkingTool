{% extends 'base.html' %}

{% block title %}Reporting - {{ super() }}{% endblock %}

{% block content %}

<div class="all">
    <form action="?" method="POST">
        <div class="c">
            <top_ctrl class="h_split">
                <p>
                    Term <input class="usrinput" type="number" min=1 placeholder=1 size="1" value="{{ term | default('1') }}" name="term" /> Home Work #<input class="usrinput" type="number" min=1 placeholder=1 size="1" value="{{ hw | default('1') }}" name="hw"/>
                    <input class="usrinput btn green" type="submit" value="confirm homework" formaction="/confirm_homework" />
                </p>

                <p>
                    <select class="usrinput" name="sub_id_selected" style="width: 220px;">
                        {% for sub in sub_ids %}
                            <option value="{{ sub.value }}" {% if sub.selected %} selected {% endif %}>
                                {{ sub.value }}
                            </option>
                        {% endfor %}
                    </select>

                    <input class="usrinput btn green" type="submit" value="confirm submission id" formaction="/confirm_sub_id" />
                </p>
                {{ message }}
            </top_ctrl>
        </div>

        <div class="c">
            <v_split_wide class="v_split wide mid">
                <div class="sticky_cols">
                    {{ df_ms | safe }}
                </div>
            </v_split_wide>
        </div>

        <div class="c">
            <div class="v_split tall">
                <h2>Report Template</h2>
                <p>Head</p>
                <div>
                    <textarea class="usrinput" name="template_head" cols="75" rows="10">{{ template_head }}</textarea>
                </div>
                <p>Common Mistakes</p>
                <div>
                    <textarea class="usrinput" name="template_common" cols="75" rows="7">{{ template_common }}</textarea>
                </div>
                <p>
                    <input class="usrinput btn red" type="submit" value="generate" formaction="/generate" />
                </p>
                <p>
                    <textarea readonly class="usrinput" name="summary" cols="75" rows="50">{{ summary }}</textarea>
                </p>
                <h2>.ipynb >>> .pdf</h2>
                <p>
                    <textarea readonly class="usrinput" name="cmd" cols="75" rows="30">{{ cmd }}</textarea>
                </p>
            </div>
            <div class="v_split tall">
                <p>
                    <h2>Report for Submission: {{ sub_id_selected }}</h2>
                </p>
                {{ summary_html | safe }}
            </div>
        </div>

    </form>

    <div class="c">
        <div class="h_split foot">
        </div_ctrl>
    </div>
</div>
{% endblock %}